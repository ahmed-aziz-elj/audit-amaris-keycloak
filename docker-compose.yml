version: '3.8'
services:
  keycloak:
      image: quay.io/keycloak/keycloak:latest
      ports:
        - "8080:8080"
      environment:
        KEYCLOAK_ADMIN: admin
        KEYCLOAK_ADMIN_PASSWORD: admin
        KC_THEME: keywind
      command:
        - "start-dev"
        - "--import-realm"
        - "--spi-theme-static-max-age=-1"
        - "--spi-theme-cache-themes=false"
        - "--spi-theme-cache-templates=false"
      volumes:
        - ./keycloak-audit/keywind/theme/keywind/:/opt/keycloak/themes/keywind

  react-app:
    build:
      context: ./react-app
    container_name: react-app
    ports:
      - "3000:3000"
    working_dir: /app
    volumes:
      - ./react-app:/app
    command: bash -c "npm install && npm start"

volumes:
  keycloak_data:
