version: '3.8'
services:
  keycloak:
      image: quay.io/keycloak/keycloak:latest
      ports:
        - "8080:8080"
      environment:
        KEYCLOAK_ADMIN: admin
        KEYCLOAK_ADMIN_PASSWORD: admin
        KC_THEME: keywind
      command:
        - "start-dev"
        - "--import-realm"
        - "--spi-theme-static-max-age=-1"
        - "--spi-theme-cache-themes=false"
        - "--spi-theme-cache-templates=false"
      volumes:
        - ./keycloak-audit/keywind/theme/keywind/:/opt/keycloak/themes/keywind

  audit-amaris:
    build:
      context: ../audit-amaris
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    volumes:
      - ../audit-amaris:/app

volumes:
  keycloak_data:
